import { Meta } from '@storybook/addon-docs';

<Meta
  title="Guides/Theming"
  parameters={{
    viewMode: 'docs',
    previewTabs: {
      canvas: { hidden: true },
    },
  }}
/>

# Theming

This UI Library implements an atomic design system designed to allow developers to easily and consistently style website
components using values from its theme. These values are stored in the atoms directory and displayed in the
[Atoms](?path=/story/atoms-blurs--blurs) section of Storybook. Theme values are referenced using
[Quarks](?path=/docs/guides-using-quarks--page). An explanation of how is included in that guide.

## Changing Atoms

When you create a new project, you should alter the values in the Atoms to match the ones provided in the site's design
system. Some values like [Spacing](?path=/story/atoms-spacing--spacing) may not need to be changed, but
[Colors](?path=/story/atoms-colors--colors) almost certainly should be.

Each atom takes the form of an object which is often nested to include subcategories. You can safely change the values
of any non-object entries in order to also change the values of every reference to that entry. For example, in colors:

```ts
const color = {
  common: { white: '#fff', black: '#000' },
  gray: {
    25: '#FCFCFD',
    50: '#F9FAFB',
    100: '#F2F4F7',
    200: '#E4E7EC',
    300: '#D0D5DD',
    400: '#98A2B3',
    500: '#667085',
    600: '#475467',
    700: '#344054',
    800: '#1D2939',
    900: '#101828',
  },
  ...
}
```

These values are referenced in quarks like so:

```tsx
<Container textColor="gray-900">I'm a Container.</Container>
```

**Important:** Changing the hex values is safe but changing the key values will affect all existing references to that
color entry. However, changing color names can and should still be done as long as all existing references across the
repository are also updated. No values are hard-coded, so a simple find and replace using your IDE should be sufficient
to change all instance of each color.

Moreover, accepted color names in quarks are auto-generated using the Atom object, so there is no need to update logic
anywhere.

The same rules apply to other atoms such as [typography](?path=/story/atoms-typography--typography),
[spacing](?path=/story/atoms-spacing--spacing), [shadows](?path=/story/atoms-shadows--shadows),
[blurs](?path=/story/atoms-blurs--blurs), and [breakpoints](?path=/story/atoms-breakpoints--breakpoints).

## Implementing Light/Dark Mode using ThemeProvider

The UI Library was built to enable light/dark mode theming for all new projects, and therefore all quarks, molecules,
and components have built-in logic and styling to implementing this compatability.

In order to implement light/dark mode into your website, you should first add the `ThemeProvider` from the `context`
directory to the top level of your project. Details are in the documentation for setting up
[Gatsby](/?path=/docs/guides-set-up-gatsby--page#create-a-layout-and-add-themeprovider) and
[NextJS](?path=/docs/guides-set-up-nextjs--page#create-a-pages-directory-and-make-an-app-file) projects.

ThemeProvider provides a `isDark` state boolean which can then be accessed anywhere within the application like so:

```tsx
import useDarkMode from 'contexts/ThemeProvider';

const MyComponent = () => {
  const [isDark, setIsDark] = useDarkMode();

  return (
    <div>
      <p>{`Dark mode is ${isDark ? 'on' : 'off'}`}</p>
      <Switch label="Dark Mode" onChange={() => setIsDark(!isDark)} />
    </div>
  );
};
export default MyComponent;
```

Manually setting colors depending on the current mode is explained in the
[Quarks guide](?path=/docs/guides-using-quarks--page#dark-and-light-mode).

## Changing Default Text and Background Colors

You should also adjust the default text and background colors to match the design system for your new project. Since
these values need to change for light/dark mode, they should not be defined in global style and are instead defined in
the `theme/colorPalettes.ts`, from which they affect each page using MUI's `CSSBaseline` component included within
ThemeProvider.

```ts
import color from 'atoms/colors/colors';

export const lightPalette = {
  background: {
    default: color.common.white,
  },
  text: {
    primary: color.gray[900],
  },
};
```

## Use with Styled-Components

Under the hood, Atoms are passed into the [MUI](https://mui.com/material-ui/customization/theming/) and
[styled-components](https://styled-components.com/docs/advanced#theming) theme, which means they can be referenced via
styled-components' props. For example:

```tsx
import styled from 'styled-components';

const GrayDiv = styled.div`
  ${props => props.theme.palette.gray[300]}
`;
```

This is particularly useful for accessing the current light/dark mode without calling `useDarkMode`:

```tsx
const BlackWhiteDiv = styled.div`
  ${props => (props.theme.palette.mode === 'light' ? '#000' : '#FFF')}
`;
```

**Important:** Creating new styled components is discouraged except when absoutely necessary because it undermines the
consistency provided by Quarks. If you need to implement CSS that is not possible via Quarks, you can use the
[CSS prop](?path=/docs/guides-using-quarks--page#creating-exceptions-css-prop) which also provides access to
`props.theme`. The CSS prop is available on all styled components including all quarks, molecules, and components in
this library.
